#!/bin/bash

APP_NAME="7sploit.app"
ZIP_URL="https://github.com/alexkkork/7sploit/raw/refs/heads/main/7sploit.zip"
ZIP_FILE="/tmp/7sploit.zip"
INSTALL_DIR="/Applications"

echo "ğŸ“¦ Installing 7Sploit from GitHub..."

# Check for curl & unzip
command -v curl >/dev/null 2>&1 || { echo >&2 "âŒ curl is required but not installed."; exit 1; }
command -v unzip >/dev/null 2>&1 || { echo >&2 "âŒ unzip is required but not installed."; exit 1; }

# Download the zip
echo "ğŸŒ Downloading 7sploit.zip..."
if ! curl -L "$ZIP_URL" --output "$ZIP_FILE"; then
    echo "âŒ Failed to download from GitHub."
    exit 1
fi

# Remove old app if exists
if [ -d "$INSTALL_DIR/$APP_NAME" ]; then
    echo "ğŸ—‘ï¸ Removing previous version..."
    rm -rf "$INSTALL_DIR/$APP_NAME"
fi

# Unzip to Applications
echo "ğŸ—‚ï¸ Installing to $INSTALL_DIR..."
if ! unzip -q "$ZIP_FILE" -d "$INSTALL_DIR"; then
    echo "âŒ Failed to unzip archive."
    exit 1
fi

# Set permissions
chmod -R 755 "$INSTALL_DIR/$APP_NAME"

echo "âœ… 7Sploit installed at: $INSTALL_DIR/$APP_NAME"
exit 0
